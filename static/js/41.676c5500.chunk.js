(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[41],{1072:function(e,t,n){"use strict";n.r(t);var c=n(153),a=n(18),i=n(26),o=n.n(i),s=n(670),l=n(46),r=n(651),m=n(154),d=n(1),j=n(24),u=n(648),b=n(679),g=n(1096),O=n(653),p=n.n(O),x=n(824),h=n(35),v=n(784),f=n.n(v),y=n(785),N=n.n(y),C=n(6),w={container:"",containerOpen:"",input:"",inputOpen:"",inputFocused:"",suggestionsList:"list-group",suggestion:"list-group-item list-group-item-action",suggestionFirst:"",suggestionHighlighted:"",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"},k=function(e){var t=e.getSuggestionValue,n=e.onSuggestionsFetchRequested,c=e.suggestions,i=e.onSuggestionSelected,o=e.registrationMode,s=e.setRegistrationMode,l=e.sendRequest,r=e.goBack,d=e.onChange,j=e.isLoading,O=e.toaster,v=e.toast,y=e.formData,k=e.validation,S=e.isRegistrationCompleted,A=e.history,B=Object(b.a)().t,F=function(e){return e.name},R=function(e){var t=e.containerProps,n=e.children,c=t.ref,i=Object(m.a)(t,["ref"]);return Object(C.jsx)(N.a,Object(a.a)(Object(a.a)({ref:function(e){null!==e&&c(e.component)}},i),{},{children:n}))},L=function(e){return Object(C.jsx)("div",{children:Object(C.jsxs)(u.C,{children:[Object(C.jsx)(u.B,Object(a.a)({},e)),Object(C.jsx)(u.D,{htmlFor:"company",children:B("companyName")})]})})},V=function(){},D=function(){var e,t,n,c,a,i;return Object(C.jsxs)(u.X,{className:"mt-3",children:[Object(C.jsx)("div",{className:"px-0 col-12 col-md-3",children:Object(C.jsxs)(u.C,{children:[Object(C.jsx)(u.B,{value:y[o].company||"",type:"text",name:"company",id:"company",placeholder:B("companyName"),onChange:d}),Object(C.jsx)(u.D,{htmlFor:"company",children:B("companyName")})]})}),Object(C.jsx)("div",{className:"px-0 my-3 my-md-0 mx-md-4 col-12 col-md-3",children:Object(C.jsxs)(u.C,{children:[Object(C.jsx)(u.B,{value:y[o].email||"",valid:(null===(e=y.newAccount)||void 0===e?void 0:e.email)&&(null===(t=k.newAccount)||void 0===t?void 0:t.email),invalid:Boolean((null===(n=y.newAccount)||void 0===n?void 0:n.email)&&!(null===(c=k.newAccount)||void 0===c?void 0:c.email)),type:"email",name:"email",id:"email",placeholder:B("email"),onChange:d}),Boolean((null===(a=y.newAccount)||void 0===a?void 0:a.email)&&!(null===(i=k.newAccount)||void 0===i?void 0:i.email))&&Object(C.jsx)(u.F,{className:"text-danger",children:B("landing.registration.errorEmailText")}),Object(C.jsx)(u.D,{htmlFor:"email",children:B("email")})]})})]})},I=function(){var e,a,s,l,r,m,j,b;return Object(C.jsxs)(u.X,{children:[Object(C.jsxs)(u.X,{children:[Object(C.jsx)("div",{className:"px-0 col-12 col-md-3",children:Object(C.jsx)(f.a,{id:"autosuggest",theme:w,suggestions:c,onSuggestionsFetchRequested:n,onSuggestionsClearRequested:V,getSuggestionValue:t,renderSuggestion:F,renderInputComponent:L,renderSuggestionsContainer:R,onSuggestionSelected:i,inputProps:{valid:Boolean(y[o].company.length&&(null===(e=k.existingCompany)||void 0===e?void 0:e.company)),invalid:Boolean(y[o].company.length&&!(null===(a=k.existingCompany)||void 0===a?void 0:a.company)),autoComplete:"off",name:"company",type:"text",id:"company",placeholder:B("companyName"),value:y[o].company||"",onChange:d}})}),Object(C.jsx)("div",{className:"px-0 mx-md-4 col-12 col-md-3",children:Object(C.jsxs)(u.C,{children:[Object(C.jsx)(u.B,{autoComplete:"off",value:y[o].email||"",valid:(null===(s=y.existingCompany)||void 0===s?void 0:s.email)&&(null===(l=k.existingCompany)||void 0===l?void 0:l.email),invalid:(null===(r=y.existingCompany)||void 0===r?void 0:r.email)&&!(null===(m=k.existingCompany)||void 0===m?void 0:m.email),type:"email",name:"email",id:"email",placeholder:B("email"),onChange:d}),Boolean((null===(j=y.existingCompany)||void 0===j?void 0:j.email)&&!(null===(b=k.existingCompany)||void 0===b?void 0:b.email))&&Object(C.jsx)(u.F,{className:"text-danger",children:B("landing.registration.errorEmailText")}),Object(C.jsx)(u.D,{htmlFor:"email",children:B("email")})]})})]}),Object(C.jsxs)(u.X,{className:"mt-3",children:[Object(C.jsx)("div",{className:"px-0 col-12 col-md-3",children:Object(C.jsxs)(u.C,{children:[Object(C.jsx)(u.B,{type:"text",id:"lastName",name:"lastName",value:y[o].lastName||"",onChange:d,placeholder:B("lastName")}),Object(C.jsx)(u.D,{htmlFor:"lastName",children:B("lastName")})]})}),Object(C.jsx)("div",{className:"px-0 mx-md-4 col-12 col-md-3",children:Object(C.jsxs)(u.C,{children:[Object(C.jsx)(u.B,{value:y[o].firstName||"",type:"text",id:"firstName",name:"firstName",onChange:d,placeholder:B("firstName")}),Object(C.jsx)(u.D,{htmlFor:"firstName",children:B("firstName")})]})}),Object(C.jsx)("div",{className:"px-0 mb-3 mb-md-0 col-12 col-md-3",children:Object(C.jsxs)(u.C,{children:[Object(C.jsx)(u.B,{value:y[o].middleName||"",type:"text",id:"middleName",name:"middleName",onChange:d,placeholder:B("middleName")}),Object(C.jsx)(u.D,{htmlFor:"middleName",children:B("middleName")})]})})]})]})},q="initial"===o,E="newAccount"===o,M="existingCompany"===o;return Object(C.jsxs)(u.q,{className:"min-vh-100 d-flex flex-column pb-4 pt-5",children:[j&&Object(C.jsxs)("div",{className:"d-flex min-vh-100 flex-column align-items-center justify-content-center col-lg-8 mx-auto",children:[S?Object(C.jsx)("div",{className:"completedRegistration",style:{width:"5em",height:"5em"}}):Object(C.jsxs)("div",{className:"d-flex justify-content-center intermittent spinner-border text-primary",style:{width:"5em",height:"5em"},role:"status",children:[" ",Object(C.jsx)("span",{className:"sr-only"})]}),Object(C.jsx)("h1",{className:"mt-5 text-center",children:B("register.".concat(o,".loading.").concat(S?"success":"pending"))}),M&&S&&Object(C.jsx)("p",{className:"text-center font-size-lg",children:B("register.existingCompany.loading.description")})]}),!j&&Object(C.jsxs)(u.p,{className:p()({"d-flex flex-column justify-content-between":!q}),children:[Object(C.jsxs)(u.X,{children:[Object(C.jsx)("h1",{children:B("register.".concat(o,".title"))}),Object(C.jsx)(u.p,{lg:8,children:Object(C.jsx)("p",{children:B("register.".concat(o,".description"))})})]}),!q&&Object(C.jsx)(u.X,{className:"mx-0 mb-3 flex-md-grow-1",children:Object(C.jsxs)(u.z,{className:"row flex-column justify-content-between",children:[E&&D(),M&&I(),!q&&Object(C.jsx)(u.A,{id:"checkbox",name:"checkedAgreement",value:"",checked:y[o].checkedAgreement,onChange:d,label:Object(C.jsx)(g.a,{defaults:"\u042f \u0441\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u0441 <l href='{{conditions}}'>\u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438</l> \u0438 <l href='{{privacyPolicy}}'>\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438</l>",values:{conditions:"/conditions",privacyPolicy:"/privacy-policy"},components:{l:Object(C.jsx)(u.L,{target:"_blank",rel:"noopener noreferrer"})}})})]})}),Object(C.jsxs)("div",{className:p()("mt-5 mt-md-0 d-flex flex-wrap",{"mt-5 flex-column align-items-start":q}),children:[Object(C.jsx)(u.j,{className:p()("text-white btn-lg col-12",{"mb-3 col-md-4":q,"mb-3 mb-md-0 col-md-3":!q}),color:"primary",block:"true",disabled:!q&&(!k.isValid||Object(h.b)(y[o])||!y[o].checkedAgreement),"data-registration-mode":"newAccount",onClick:q?s:l,children:B("register.".concat(o,".button"))},Object(x.a)()),Object(C.jsx)(u.j,{className:p()("btn-lg col-12",{"mx-md-3 col-md-3":!q,"col-md-6":q}),color:"primary",variant:"outline",block:"true","data-registration-mode":"existingCompany",onClick:q?s:r,children:B("initial"===o?"register.joinCompany":"goBack")},Object(x.a)())]})]}),q&&Object(C.jsx)(u.j,{className:"btn-lg col-12 col-md-3 mt-5 mt-md-0",color:"primary",variant:"outline",onClick:function(){return A.goBack()},children:B("goBack")},Object(x.a)()),Object(C.jsx)(u.hb,{ref:O,push:v,placement:"top-end"})]})},S=n(94),A=n(72),B=n(120),F=n(156),R={newAccount:{email:"",company:"",checkedAgreement:!1},existingCompany:{company:"",firstName:"",lastName:"",middleName:"",checkedAgreement:!1}},L={isValid:!1,newAccount:{},existingCompany:{}},V=Object(S.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))((function(e){var t=e.isLoggedIn,n=Object(m.a)(e,["isLoggedIn"]),i=Object(b.a)().t,g=Object(d.useState)([]),O=Object(r.a)(g,2),p=O[0],x=O[1],h=Object(d.useState)([]),v=Object(r.a)(h,2),f=v[0],y=v[1],N=Object(d.useState)(!1),w=Object(r.a)(N,2),V=w[0],D=w[1],I=Object(d.useState)(L),q=Object(r.a)(I,2),E=q[0],M=q[1],_=Object(d.useState)(!1),T=Object(r.a)(_,2),X=T[0],z=T[1],P=Object(d.useState)(0),J=Object(r.a)(P,2),Z=J[0],H=J[1],Y=Object(d.useRef)(),$=Object(d.useState)("initial"),G=Object(r.a)($,2),K=G[0],Q=G[1],U=Object(d.useState)(R),W=Object(r.a)(U,2),ee=W[0],te=W[1],ne=Object(S.c)();Object(d.useEffect)(Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("existingCompany"!==K){e.next=5;break}return e.next=3,Object(B.i)();case 3:t=e.sent,x(Object(s.a)(t));case 5:case"end":return e.stop()}}),e)}))),[K]);var ce=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(t=Object(a.a)(Object(a.a)({},ee),{},Object(c.a)({},K,Object(a.a)(Object(a.a)({},ee[K]),{},{companyId:p.filter((function(e){return e.name===ee[K].company}))[0].id}))))[K].checkedAgreement,delete t[K].company,e.prev=3,z(!0),e.next=7,Object(B.x)(t[K]);case 7:n=e.sent,i=n.token,(s=n.message)&&(z(!1),H((function(){return oe(s)}))),s&&!i||D(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),z(!1),H((function(){return oe()}));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(t=Object(a.a)(Object(a.a)({},ee),{},Object(c.a)({},K,Object(a.a)({},ee[K]))))[K].checkedAgreement,e.prev=2,z(!0),e.next=6,Object(B.B)(t[K]);case 6:(null===(n=e.sent)||void 0===n?void 0:n.token)&&(D(!0),setTimeout((function(){z(!1),ne(Object(A.d)(n.token))}),3500)),n.message&&(z(!1),H((function(){return oe(n.message)}))),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),z(!1),H((function(){return oe()}));case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),ie=function(e,t,n){var i,o;if("email"===e){var s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase());M(s?Object(a.a)(Object(a.a)({},E),{},Object(c.a)({isValid:!0},K,Object(a.a)(Object(a.a)({},E[K]),{},{email:!0}))):Object(a.a)(Object(a.a)({},E),{},Object(c.a)({isValid:!1},K,Object(a.a)(Object(a.a)({},E[K]),{},{email:!1}))))}else"existingCompany"===K&&"company"===e?p.filter((function(e){return e.name===(t.trim()||ee[K].company)})).length?M(Object(a.a)(Object(a.a)({},E),{},Object(c.a)({isValid:!0},K,Object(a.a)(Object(a.a)({},E[K]),{},{company:!0})))):M(Object(a.a)(Object(a.a)({},E),{},Object(c.a)({isValid:!1},K,Object(a.a)(Object(a.a)({},E[K]),{},{company:!1})))):(t.trim()||n)&&((null===(i=E[K])||void 0===i?void 0:i.email)||(null===(o=E[K])||void 0===o?void 0:o.company))?M(Object(a.a)(Object(a.a)({},E),{},Object(c.a)({isValid:!0},K,Object(a.a)({},E[K])))):M(Object(a.a)(Object(a.a)({},E),{},Object(c.a)({isValid:!1},K,Object(a.a)({},E[K]))))},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(C.jsxs)(u.eb,{title:i("defaultErrorTitle"),autohide:!0,children:[Object(C.jsxs)(u.gb,{close:!0,children:[Object(C.jsx)("svg",{className:"rounded me-2",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img",children:Object(C.jsx)("rect",{width:"100%",height:"100%",fill:"#EB5757"})}),Object(C.jsx)("strong",{className:"me-auto",children:i("defaultErrorTitle")})]}),Object(C.jsx)(u.fb,{children:e||i("default400Error")})]})},se=Object(a.a)(Object(a.a)({},n),{},{registrationMode:K,isRegistrationCompleted:V,onSuggestionSelected:function(e,t){var n=t.suggestion,i=t.suggestionValue;t.suggestionIndex,t.sectionIndex,t.method;te(Object(a.a)(Object(a.a)({},ee),{},Object(c.a)({},K,Object(a.a)(Object(a.a)({},ee[K]),{},{companyId:n.id,company:i})))),ie("company",i),y([])},getSuggestionValue:function(e){return e.name},onSuggestionsFetchRequested:function(e){var t=e.value;y(function(e){var t=e.trim().toLowerCase(),n=t.length;return 0===n?[]:p.filter((function(e){return e.name.toLowerCase().slice(0,n)===t}))}(t))},suggestions:f,companiesList:p,setRegistrationMode:function(e){var t=e.target.dataset.registrationMode;Q(t)},formData:ee,onChange:function(e){var t=e.target,n=t.name,i=t.value,o=t.checked;te(Object(a.a)(Object(a.a)({},ee),{},Object(c.a)({},K,Object(a.a)(Object(a.a)({},ee[K]),{},Object(c.a)({},n,i||o))))),n&&i&&ie(n,i,o)},sendRequest:function(){return"newAccount"===K?ae():ce()},goBack:function(){te(R),M(L),Q("initial")},validation:E,isLoading:X,toaster:Y,toast:Z});return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(F.a,{children:[Object(C.jsx)("title",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043b\u0438\u0446\u0430"}),Object(C.jsx)("meta",{name:"description",content:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u0431\u0438\u0437\u043d\u0435\u0441-\u0430\u043a\u043a\u0430\u0443\u043d\u0442 \u0438\u043b\u0438 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438. \u0411\u044b\u0441\u0442\u0440\u043e, \u043d\u0430\u0434\u0435\u0436\u043d\u043e \u0438 \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u043e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e!"})]}),Object(C.jsx)(k,Object(a.a)({},se)),t&&"existingCompany"!==K&&Object(C.jsx)(j.a,{to:"/dashboard"})]})}));t.default=V}}]);
//# sourceMappingURL=41.676c5500.chunk.js.map