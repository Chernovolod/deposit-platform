(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[22,33],{1083:function(e,t,s){"use strict";s.r(t);var c=s(153),a=s(18),n=s(26),r=s.n(n),i=s(46),l=s(651),o=s(159),d=s(160),j=s(162),u=s(161),b=s(1),m=s(94),x=s(154),h=s(679),p=s(669),O=s(648),f=s(654),v=s(1069),g=s(155),N=(s(1019),s(686),s(6)),y={ACTIVE:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439",CLOSED:"\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0439",CREATED:"\u041d\u043e\u0432\u044b\u0439"},w=function(e){var t=e.onClick,s=e.data,c=s.revenue,a=s.amount,n=s.status,r=s.currency,i=s.type,l=s.percentage,o=s.days,d=(s.index,Object(h.a)().t),j="CREATED"===n?"#3181ED":"#F6F6F6",u="CREATED"===n?"#FFF":"#333",b="CREATED"===n?"#E0E0E0":"#828282";return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(O.p,{md:4,className:"mb-5 px-3",children:Object(N.jsxs)(O.k,{onClick:t,className:"p-2",style:{backgroundColor:j,color:u,cursor:"pointer"},children:[Object(N.jsxs)(O.m,{className:"d-flex align-items-stretch border-bottom-0 bg-transparent",children:[Object(N.jsx)(O.p,{className:"text-start",xs:6,xl:6,children:Object(N.jsx)("h6",{children:"".concat(y[n]," ").concat(d("requests.create.header.contribution").toLowerCase())})}),Object(N.jsxs)(O.p,{className:"text-end",xs:6,xl:6,children:[Object(N.jsx)("small",{style:{color:b},children:d("requests.create.form.amount")}),Object(N.jsx)("h6",{className:"m-0",children:"".concat(a," ").concat(r)})]})]}),Object(N.jsxs)(O.l,{className:"pt-0",children:[Object(N.jsx)("hr",{className:"m-0"}),Object(N.jsxs)(O.X,{className:"mt-3",children:[Object(N.jsxs)(O.p,{className:"text-start",xs:6,xl:6,children:[Object(N.jsx)("small",{style:{color:b},children:d("requests.create.form.percentage")}),Object(N.jsx)("span",{className:"d-block",children:"".concat(l," %")})]}),Object(N.jsxs)(O.p,{className:"text-end",xs:6,xl:6,children:[Object(N.jsx)("small",{style:{color:b},children:d("requests.create.form.days")}),Object(N.jsx)("span",{className:"d-block",children:d("requests.days.".concat(o))})]})]}),Object(N.jsxs)(O.X,{className:"mt-3",children:[Object(N.jsxs)(O.p,{className:"text-start",xs:6,xl:6,children:[Object(N.jsx)("small",{style:{color:b},children:d("requests.create.form.type")}),Object(N.jsx)("span",{className:"d-block",children:d("requests.".concat(i))})]}),Object(N.jsxs)(O.p,{className:"text-end",xs:6,xl:6,children:[Object(N.jsx)("small",{style:{color:b},children:d("requests.create.form.revenue")}),Object(N.jsx)("span",{className:"d-block",children:"".concat(c," ").concat(r)})]})]})]})]})})})},k=s(655),D=function(e){var t=e.barStatistics,s=e.donutBankStatistics,c=e.setPageMode,n=e.setSpecificModeData,r=e.requestsSummary,i=e.isLoading,o=e.isBankUser,d=Object(b.useState)(0),j=Object(l.a)(d,2),u=j[0],m=j[1];Object(b.useEffect)((function(){(null===s||void 0===s?void 0:s.totalRevenueSum)&&m(null===s||void 0===s?void 0:s.totalRevenueSum)}),[null===s||void 0===s?void 0:s.totalRevenueSum]);var x=[{beforeDraw:function(e){var t=e.width,c=e.height,a=e.ctx;a.restore();var n=(c/260).toFixed(2);a.font=n+"em sans-serif",a.textBaseline="top";var r=document.createElement("div").innerText=C("total"),i=Math.round((t-a.measureText(r).width)/2.6),l=c/2.2,o=document.createElement("div").innerText=(null===s||void 0===s?void 0:s.activeOffers)+(null===s||void 0===s?void 0:s.closedOffers),d=Math.round((t-a.measureText(o).width)/2.55),j=c/1.85;a.fillText(r,i,l),a.fillText(o,d,j),a.save()}}],p=[{afterEvent:function(e){this.beforeDraw(e.$context.chart)},beforeDraw:function(e){var t=e.width,s=e.height,c=e.ctx;c.restore();var a=(s/260).toFixed(2);c.font=a+"em sans-serif",c.textBaseline="top";var n=document.createElement("div").innerText=C("total"),r=Math.round((t-c.measureText(n).width)/2.5),i=s/2.2,l=document.createElement("div").innerText="".concat(u," ").concat(C("BYN")),o=Math.round((t-c.measureText(l).width)/2.5),d=s/1.85;c.fillText(n,r,i),c.fillText(l,o,d),c.save()}}],y={labels:["".concat(s.activeOffers," \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445"),"".concat(s.closedOffers," \u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0445")],datasets:[{data:[s.activeOffers,s.closedOffers],backgroundColor:["#2F80ED","#82B3F4"],hoverOffset:1}]},k={labels:Object.keys(null===s||void 0===s?void 0:s.totalRevenue).map((function(e,t){return"".concat(null===s||void 0===s?void 0:s.totalRevenue[e]," ").concat(e)})),datasets:[{data:Object.values(null===s||void 0===s?void 0:s.totalRevenue),backgroundColor:["#2F80ED","#82B3F4","#C1D9FA"],hoverOffset:4}]},D={cutout:95,maintainAspectRatio:!1,responsive:!0,plugins:{legend:{labels:{borderRadius:50,usePointStyle:!0,pointStyle:"circle"},onClick:function(e,t,s){v.b.overrides.doughnut.plugins.legend.onClick(e,t,s)},position:"right",align:"center"}},scales:{x:{ticks:{display:!1},beginAtZero:!0,grid:{drawBorder:!1,display:!1}},y:{beginAtZero:!0,ticks:{display:!1},grid:{display:!1,drawBorder:!1,borderDash:[4,2]}}}},C=Object(h.a)().t;return Object(N.jsxs)(N.Fragment,{children:[!o&&Object(N.jsxs)(O.p,{className:"mt-4 mb-3 d-flex justify-content-between align-items-stretch",children:[Object(N.jsx)("h4",{children:C("deposits.default.title")}),Object(N.jsx)(g.b,{to:"/requests",className:"text-decoration-none pe-2",children:C("watchAll")})]}),!o&&Object(N.jsx)(O.X,{className:"d-flex flex-wrap",children:i?Object(N.jsx)(f.a,{}):i||r.length?!i&&r.length?r.map((function(e,t){return Object(N.jsx)(w,{onClick:function(){return t=e.id,c("specific"),void n(t);var t},setPageMode:c,data:Object(a.a)(Object(a.a)({},e),{},{index:t})},e.id)})):void 0:Object(N.jsx)("div",{className:"mb-5",children:C("dashboard.deposits.empty")})}),o&&Object(N.jsxs)(O.X,{className:"mb-3",children:[Object(N.jsxs)(O.p,{xl:6,children:[Object(N.jsx)("div",{children:Object(N.jsx)("h4",{className:"mb-3",children:C("dashboard.deals.title")})}),Object(N.jsx)(O.k,{children:Object(N.jsx)(O.l,{children:Object(N.jsx)("div",{style:{height:"290px"},children:!!Object.keys(s.totalRevenue).length&&Object(N.jsx)(v.c,{data:y,options:D,plugins:x})})})})]}),Object(N.jsxs)(O.p,{className:"pt-4 pt-md-0",xl:6,children:[Object(N.jsx)("h4",{className:"mb-3",children:C("dashboard.TotalTurnover.title")}),Object(N.jsx)(O.k,{children:Object(N.jsx)(O.l,{children:Object(N.jsx)("div",{style:{height:"290px"},children:!!Object.keys(s.totalRevenue).length&&Object(N.jsx)(v.c,{data:k,options:D,plugins:p})})})})]})]}),Object(N.jsx)("h4",{children:C(o?"circulation":"income")}),Object(N.jsx)(O.k,{children:Object(N.jsx)(O.l,{children:Object(N.jsx)("div",{style:{height:"350px"},children:Object(N.jsx)(v.a,{data:function(e){var s=e.getContext("2d").createLinearGradient(0,0,0,200);return s.addColorStop(0,"#82B3F4"),s.addColorStop(1,"#2F80ED"),{labels:null===t||void 0===t?void 0:t.map((function(e){return e.name})),datasets:[{data:null===t||void 0===t?void 0:t.map((function(e){return e.profit})),backgroundColor:s,lineTension:3,borderColor:"#3181ED",borderWidth:1,borderRadius:2,barThickness:8}]}},options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,grid:{drawBorder:!1,display:!1}},y:{beginAtZero:!0,ticks:{margin:-30,callback:function(e,t,s){return"".concat(e," BYN")}},grid:{drawBorder:!1,borderDash:[4,2]}}}}})})})})]})},C=s(5),M=s(120),A=s(35),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.getItem("auth-token");return Object(A.a)("".concat(C.a,"/company/dashboard"),"GET",{},{Authorization:e})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.getItem("auth-token");return Object(A.a)("".concat(C.a,"/bank/dashboard"),"GET",{},{Authorization:e})},B=function(e){var t=e.setPageMode,s=e.isBankUser,c=Object(x.a)(e,["setPageMode","isBankUser"]),n=(Object(h.a)().t,Object(b.useState)(!1)),o=Object(l.a)(n,2),d=o[0],j=o[1],u=Object(b.useState)([]),m=Object(l.a)(u,2),p=m[0],O=m[1],f=Object(b.useState)({totalRevenue:{}}),v=Object(l.a)(f,2),g=v[0],y=v[1],w=Object(b.useState)({type:"IRREVOCABLE",percentage:0,currency:"BYN",days:90,minAmount:0,maxAmount:0}),k=Object(l.a)(w,2),C=(k[0],k[1],Object(b.useState)(!1)),M=Object(l.a)(C,2),A=M[0];M[1];Object(b.useEffect)(Object(i.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,E();case 3:t=e.sent,y(t),e.next=11;break;case 7:return e.next=9,S();case 9:c=e.sent,O(c);case 11:case"end":return e.stop()}}),e)}))),[]);var B=Object(a.a)({donutBankStatistics:g,barStatistics:p,visible:d,setVisible:j,isCreatingOffer:A,isBankUser:s,setPageMode:t},c);return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(D,Object(a.a)({},B))})},q=s(1071),R=s(670),T=s.p+"static/media/converter.0a4d63be.png",F=function(e){var t=e.formData,s=e.currencies,c=e.toaster,a=e.toast,n=e.onChange,r=e.isLoading,i=(e.history,Object(h.a)().t);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(O.k,{children:Object(N.jsxs)(O.X,{children:[Object(N.jsx)(O.p,{md:7,children:Object(N.jsx)(O.l,{className:"p-md-5 p-3",children:Object(N.jsxs)(O.p,{md:10,children:[Object(N.jsx)("h4",{className:"mb-3",children:i("converter")}),Object(N.jsx)(O.o,{className:"font-size-md text-muted",children:"".concat(i("currencies.text")," ").concat(function(){var e=new Date,t=e.getDate()<10?"0".concat(e.getDate()):e.getDate(),s=e.getFullYear(),c=e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth();return"".concat(t,".").concat(c,".").concat(s)}())}),r&&Object(N.jsx)(f.a,{classes:"mt-5"}),!r&&t.length&&[1,2,3,4,5,6].map((function(e,c){var a,r,i;return Object(N.jsxs)("div",{className:"rounded-xl mb-3 align-items-center border-primary ps-0 p-1 d-flex",style:{border:"1px solid"},children:[Object(N.jsx)(O.p,{xs:4,md:5,xl:4,xxl:3,children:Object(N.jsx)("h5",{className:"ms-3 me-2 text-nowrap my-0 pt-1",children:"".concat(s[c].amount," ").concat(s[c].currency)})}),Object(N.jsx)("svg",{width:"2",height:"31",viewBox:"0 0 2 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(N.jsx)("path",{d:"M1 0V30.5",stroke:"#2F80ED"})}),Object(N.jsx)(O.B,{className:"border-0 ms-3",onChange:n,value:null===(a=t[c])||void 0===a?void 0:a.buy,type:"text","data-saved":null===(r=t[c])||void 0===r?void 0:r.saved,name:null===(i=t[c])||void 0===i?void 0:i.currency})]},e)}))]})})}),Object(N.jsxs)(O.p,{md:5,className:"position-relative",children:[Object(N.jsx)(O.n,{style:{objectFit:"cover"},className:"w-100 h-100",src:T}),Object(N.jsx)(g.b,{className:"pb-4 ps-4 d-none d-md-block white-with-right-arrow text-decoration-none text-white position-absolute bottom-0 start-0 fs-5",to:"/requests?mode=calculator",children:i("currencies.link")})]})]})}),Object(N.jsx)(O.hb,{ref:c,push:a,placement:"top-end"})]})},I=function(e){var t=Object.assign({},e),s=Object(b.useRef)(),c=Object(h.a)().t,n=Object(b.useState)(!1),o=Object(l.a)(n,2),d=o[0],j=o[1],u=Object(b.useState)([]),m=Object(l.a)(u,2),x=m[0],p=m[1],f=Object(b.useState)(0),v=Object(l.a)(f,2),g=v[0],y=v[1],w=Object(b.useState)([{currency:"BYN",buy:"1",sell:"1",amount:1}]),k=Object(l.a)(w,2),D=k[0],C=k[1];Object(b.useEffect)(Object(i.a)(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D.length>1)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,j(!0),e.next=6,Object(M.l)();case 6:(t=e.sent).length&&!t.message&&(s=[].concat(Object(R.a)(D),Object(R.a)(t)).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{saved:e.buy,buy:Number((1/e.buy).toFixed(4))})})),C(s),p(s)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),y((function(){return A()}));case 14:return e.prev=14,j(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])}))),[]);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(N.jsxs)(O.eb,{title:c("defaultErrorTitle"),autohide:!0,children:[Object(N.jsxs)(O.gb,{close:!0,children:[Object(N.jsx)("svg",{className:"rounded me-2",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img",children:Object(N.jsx)("rect",{width:"100%",height:"100%",fill:"#EB5757"})}),Object(N.jsx)("strong",{className:"me-auto",children:c("defaultErrorTitle")})]}),Object(N.jsx)(O.fb,{children:e||c("default400Error")})]})},S=Object(a.a)({isLoading:d,formData:x,currencies:D,onChange:function(e){var t=e.target,s=t.name,c=t.value,n=t.dataset.saved,r=D.map((function(e){return"BYN"!==s&&"BYN"===e.currency?Object(a.a)(Object(a.a)({},e),{},{buy:Number(Number(n)*parseFloat(c))||"0"}):e.currency===s?Object(a.a)(Object(a.a)({},e),{},{buy:c.includes(".")?c:Number(parseFloat(c).toFixed(4))||"0"}):Object(a.a)(Object(a.a)({},e),{},{buy:Number((Number(n)/Number(e.saved)*parseFloat(c)).toFixed(4))||"0"})}));C(r),p(r)},toaster:s,toast:g},t);return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(F,Object(a.a)({},S))})},L=s(826),P=function(e){var t=e.pageMode,s=e.setPageMode,c=e.isLoading,n=e.userType,r=e.createDepositHandler,i=e.isCreatingOffer,l=e.onChange,o=e.visible,d=e.setVisible,j=e.specificModeData,u=Object(x.a)(e,["pageMode","setPageMode","isLoading","userType","createDepositHandler","isCreatingOffer","onChange","visible","setVisible","specificModeData"]),b=Object(h.a)().t,m="BANK_ADMIN"===n,v="default"===t,g="currencies"===t,y="create"===t,w="specific"===t,D={currencies:function(){return Object(N.jsx)(I,Object(a.a)({},u))},create:function(){return Object(N.jsx)(q.default,{withCalculator:!0,setPageMode:s})},default:function(){return Object(N.jsx)(B,Object(a.a)({setPageMode:s,isBankUser:m},u))},specific:function(){return Object(N.jsx)(L.default,{setPageMode:s,specificModeData:j})}};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p.a,{title:b("dashboard.title.".concat(t)),withPrimaryButton:v,primaryButtonLabel:b("".concat(m?"deposits":"dashboard",".primaryButtonLabel")),onPrimaryButtonClick:function(){return m?d(!0):s("create")}}),Object(N.jsxs)(O.h,{style:{"--cui-breadcrumb-divider":"'-'"},children:[!v&&Object(N.jsx)(O.i,{onClick:function(){return s("default")},children:b("dashboard.title.default")}),y&&Object(N.jsx)(O.i,{active:y,children:b("dashboard.title.create")}),g&&Object(N.jsx)(O.i,{active:g,children:b("dashboard.title.currencies")}),w&&Object(N.jsx)(O.i,{active:w,children:b("dashboard.title.specific")})]}),c?Object(N.jsx)(f.a,{classes:"mt-5"}):D[t](),Object(N.jsx)(O.O,{alignment:"center",visible:o,onDismiss:function(){return d(!1)},children:Object(N.jsxs)(O.Q,{className:"pb-4 px-3",children:[Object(N.jsx)(O.S,{onDismiss:function(){return d(!1)},children:Object(N.jsx)(O.T,{component:"h2",children:b("deposits.modal.title")})}),Object(N.jsx)(O.P,{className:"mb-7",children:Object(N.jsxs)(O.z,{children:[Object(N.jsxs)(O.X,{className:"m-0",children:[Object(N.jsxs)(O.p,{xs:4,xl:2,className:"amount-container px-0 me-md-3",children:[Object(N.jsx)(O.F,{component:"span",id:"percentage",children:b("requests.create.form.percentage")}),Object(N.jsx)(O.B,{"aria-describedby":"percentage",autoComplete:"off",type:"number",name:"percentage",id:"percentage",onChange:l})]}),Object(N.jsxs)(O.p,{xs:8,className:"ps-2 ps-md-0",xl:4,children:[Object(N.jsx)(O.F,{component:"span",id:"days",children:b("requests.create.form.days")}),Object(N.jsxs)(O.E,{name:"days",onChange:l,"aria-describedby":"days","aria-label":b("requests.create.form.days"),children:[Object(N.jsx)("option",{value:"90",children:b("dashboard.modal.form.select.1")}),Object(N.jsx)("option",{value:"180",children:b("dashboard.modal.form.select.2")}),Object(N.jsx)("option",{value:"365",children:b("dashboard.modal.form.select.3")}),Object(N.jsx)("option",{value:"1095",children:b("dashboard.modal.form.select.4")})]})]}),Object(N.jsxs)(O.p,{className:"p-0 mt-3 mt-md-0",xs:12,xl:5,children:[Object(N.jsx)(O.F,{component:"span",id:"type",children:b("requests.create.form.type")}),Object(N.jsxs)(O.E,{name:"type",onChange:l,"aria-describedby":"type","aria-label":b("requests.create.form.type"),children:[Object(N.jsx)("option",{value:"REVOCABLE",children:b("Revocable")}),Object(N.jsx)("option",{value:"IRREVOCABLE",children:b("Irrevocable")})]})]})]}),Object(N.jsxs)(O.X,{className:"mt-3 mt-md-4",children:[Object(N.jsxs)(O.p,{className:"mt-3 mt-md-0",xs:12,xl:5,children:[Object(N.jsx)(O.F,{component:"span",id:"minAmount",children:b("requests.create.form.minimalAmount")}),Object(N.jsx)(O.B,{"aria-describedby":"minAmount",autoComplete:"off",type:"number",name:"minAmount",id:"minAmount",placeholder:"0",onChange:l})]}),Object(N.jsxs)(O.p,{className:"mt-3 mt-md-0",xs:12,xl:5,children:[Object(N.jsx)(O.F,{component:"span",id:"maxAmount",children:b("requests.create.form.maximumAmount")}),Object(N.jsx)(O.B,{"aria-describedby":"maxAmount",autoComplete:"off",type:"number",name:"maxAmount",id:"maxAmount",placeholder:"0",onChange:l})]}),Object(N.jsxs)(O.p,{className:"mt-3 mt-md-0",xl:2,children:[Object(N.jsx)(O.F,{component:"span",id:"currency",children:b("requests.create.form.currency")}),Object(N.jsxs)(O.E,{name:"currency",onChange:l,"aria-describedby":"currency","aria-label":b("requests.create.form.currency"),children:[Object(N.jsx)("option",{value:"BYN",children:b("BYN")}),Object(N.jsx)("option",{value:"USD",children:b("USD")}),Object(N.jsx)("option",{value:"EUR",children:b("EUR")}),Object(N.jsx)("option",{value:"RUB",children:b("RUB")})]})]})]})]})}),Object(N.jsx)(O.R,{className:"justify-content-start",children:Object(N.jsx)(O.j,{onClick:r,disabled:i,className:"text-white py-2 col-12 col-md-6",size:"sm",color:"primary",children:i?Object(N.jsx)(k.a,{classes:"text-white"}):b("deposits.modal.primaryButton")})})]})})]})},U=s(156),V=function(e){Object(j.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).setSpecificModeData=function(e){var t=n.state.requests.filter((function(t){return t.id===e})),s=Object(l.a)(t,1),c=s[0];n.setState({specificModeData:c})},n.getRequestsHandler=Object(i.a)(r.a.mark((function e(){var t,s,c,a,i,o,d,j,u,b,m,x,h,p,O,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({isLoading:!0}),e.next=4,Object(M.s)("CREATED");case 4:return t=e.sent,e.next=7,Object(M.s)("ACTIVE");case 7:return s=e.sent,e.next=10,Object(M.s)("CLOSED");case 10:c=e.sent,t.message||s.message||c.message||(a=t.reverse(),i=Object(l.a)(a,2),o=i[0],d=i[1],j=s.reverse(),u=Object(l.a)(j,2),b=u[0],m=u[1],x=c,h=Object(l.a)(x,2),p=h[0],O=h[1],f=[o,d,b,m,p,O].filter(Boolean),n.setRequests(f)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:return e.prev=17,n.setState({isLoading:!1}),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])}))),n.setRequests=function(e){n.setState(Object(a.a)(Object(a.a)({},n.state),{},{requests:e}))},n.setSpecificModeData=function(e){var t=n.state.requests.filter((function(t){return t.id===e})),s=Object(l.a)(t,1)[0];n.setState({specificModeData:s})},n.setPageMode=function(e){n.props.history.push("/dashboard?mode=".concat(e)),n.setState({pageMode:e})},n.onChangeNewOfferHandler=function(e){var t=e.target,s=t.name,r=t.value;n.setState({newDepositData:Object(a.a)(Object(a.a)({},n.state.newDepositData),{},Object(c.a)({},s,r))})},n.setVisible=function(e){n.setState({visible:e})},n.createDepositHandler=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({isCreatingOffer:!0}),e.next=4,Object(M.e)(n.state.newDepositData);case 4:if(e.sent.message){e.next=9;break}return n.setState({visible:!1}),e.next=9,n.getDepositsHandler();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:return e.prev=13,n.setState({isCreatingOffer:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,11,13,16]])}))),n.state={requests:[],specificModeData:{},isCreatingOffer:!1,visible:!1,newDepositData:{type:"IRREVOCABLE",percentage:0,currency:"BYN",days:90,minAmount:0,maxAmount:0},isLoading:!1,pageMode:"default"},n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new URLSearchParams(this.props.location.search).get("mode"))&&this.setPageMode(t),"BANK_ADMIN"===this.props.userType){e.next=5;break}return e.next=5,this.getRequestsHandler();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e,t,s){return t.newDepositData===this.state.newDepositData||!this.state.visible}},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(r.a.mark((function e(t,s,c){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new URLSearchParams(this.props.location.search).get("mode"),n=new URLSearchParams(t.location.search).get("mode"),a&&n&&n!==a&&this.setPageMode(a),"specific"!==s.pageMode&&"create"!==s.pageMode||s.pageMode===this.state.pageMode||"default"!==this.state.pageMode){e.next=6;break}return e.next=6,this.getRequestsHandler();case 6:case"end":return e.stop()}}),e,this)})));return function(t,s,c){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isCreatingOffer,s=e.pageMode,c=e.isLoading,n=e.visible,r=e.requests,i=e.specificModeData,l=Object(a.a)({requestsSummary:r,isCreatingOffer:t,specificModeData:i,setSpecificModeData:this.setSpecificModeData,createDepositHandler:this.createDepositHandler,onChange:this.onChangeNewOfferHandler,setVisible:this.setVisible,visible:n,userType:this.props.userType,isLoading:c,pageMode:s,setPageMode:this.setPageMode},this.props);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(U.a,{children:Object(N.jsx)("title",{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 | Deposit Platform"})}),Object(N.jsx)(P,Object(a.a)({},l))]})}}]),s}(b.Component),_=Object(m.b)((function(e){return{userType:e.user.type}}),null)(V);t.default=_},654:function(e,t,s){"use strict";s(1);var c=s(6),a=function(e){var t=e.classes;return Object(c.jsxs)("div",{className:"".concat(t||""," d-flex justify-content-center intermittent spinner-border text-primary mx-auto"),style:{width:"5em",height:"5em"},role:"status",children:[" ",Object(c.jsx)("span",{className:"sr-only"})]})};t.a=a},669:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s(1);var c=s(648),a=s(653),n=s.n(a),r=s(6),i=function(e){var t=e.title,s=e.withPrimaryButton,a=e.withSecondaryButton,i=e.primaryButtonLabel,l=e.secondaryButtonLabel,o=e.onPrimaryButtonClick,d=e.onSecondaryButtonClick;return Object(r.jsxs)(c.p,{xl:12,className:"mb-3 d-flex flex-column flex-md-row justify-content-between",children:[Object(r.jsx)("h2",{children:t}),Object(r.jsxs)(c.p,{className:"d-flex flex-wrap flex-md-nowrap justify-content-md-end",xs:12,md:6,children:[a&&Object(r.jsx)(c.j,{onClick:d,size:"sm",className:n()("mb-3 mb-md-0 col-12 col-md-6 py-2",{"me-0 me-md-3":s}),color:"primary",variant:"outline",children:l}),s&&Object(r.jsx)(c.j,{onClick:o,size:"sm",className:"text-white col-12 col-md-6 py-2",color:"primary",children:i})]})]})}},685:function(e,t,s){"use strict";var c=s(648),a=s(94),n=s(72),r=s(679),i=s(6),l=Object(a.b)((function(e){return{isApprovalModalShown:e.isApprovalModalShown}}),(function(e){return{setVisible:function(t){return e(Object(n.e)(t))}}}))((function(e){var t=e.isApprovalModalShown,s=e.setVisible,a=Object(r.a)().t;return Object(i.jsx)(c.O,{alignment:"center",visible:t,onDismiss:function(){return s(!1)},children:Object(i.jsxs)(c.Q,{className:"pb-4 px-3",children:[Object(i.jsx)(c.S,{onDismiss:function(){return s(!1)},children:Object(i.jsx)(c.T,{className:"mt-3",component:"h2",children:a("approvalModal.title")})}),Object(i.jsx)(c.P,{className:"mb-7",children:a("approvalModal.text")}),Object(i.jsxs)(c.R,{className:"d-flex justify-content-start",children:[Object(i.jsx)(c.j,{onClick:function(){s(!1),window.open("/profile","_self")},className:"text-white py-2",size:"sm",color:"primary",children:a("approvalModal.primaryButton")}),Object(i.jsx)(c.j,{onClick:function(){return s(!1)},className:"py-2",size:"sm",color:"primary",variant:"outline",children:a("cancel")})]})]})})}));t.a=l},686:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s(1);var c=s(648),a=s(679),n=s(6),r=function(e){var t=e.title,s=e.editable,r=e.onEdit,i=e.buttonLabel,l=Object(a.a)().t;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(c.p,{className:"mt-5 mb-3 d-flex justify-content-between align-items-stretch",children:[Object(n.jsx)("h4",{children:t}),s&&Object(n.jsx)(c.j,{onClick:r,color:"secondary",variant:"ghost",children:i||l("edit")})]})})}},826:function(e,t,s){"use strict";s.r(t);var c=s(18),a=s(26),n=s.n(a),r=s(46),i=s(651),l=s(154),o=s(1),d=s(679),j=s(648),u=s(655),b=s(653),m=s.n(b),x=s(654),h=s(6),p=function(e){var t=e.userType,s=e.isLoading,c=e.visible,a=e.toaster,n=e.toast,r=e.setVisible,i=e.onClickHandler,l=e.suggestions,o=e.handleCloseRequest,b=e.specificModeData,p=e.handleApplyOffer,O=(e.bankName,e.bankSuggestions.order),f=Object(d.a)().t,v=b.id,g=b.amount,N=b.percentage,y=b.currency,w=b.days,k=b.type,D=b.status,C=b.revenue;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(j.X,{className:"align-items-stretch bg-primary rounded-3 m-0 py-4 px-2 text-white justify-content-between",children:[Object(h.jsxs)(j.p,{xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-white",children:f("requests.create.form.amount")}),Object(h.jsx)("h6",{className:"m-0",children:"".concat(g," ").concat(y)})]}),Object(h.jsxs)(j.p,{className:" mb-3 mb-md-0 text-end text-md-start",xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-white",children:f("requests.create.form.percentage")}),Object(h.jsx)("h6",{className:"d-block",children:"".concat(N," %")})]}),Object(h.jsxs)(j.p,{xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-white",children:f("requests.create.form.days")}),Object(h.jsx)("h6",{className:"d-block",children:f("requests.days.".concat(w))})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0 text-end text-md-start",xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-white",children:f("requests.create.form.type")}),Object(h.jsx)("h6",{className:"d-block",children:f("requests.".concat(k))})]}),"BANK_ADMIN"!==t&&"CREATED"!==D&&Object(h.jsxs)(j.p,{xl:2,xs:6,className:"text-end text-md-start",children:[Object(h.jsx)("small",{className:"text-white",children:f("requests.create.form.revenue")}),Object(h.jsxs)("h6",{className:"d-block",children:[C," ",y]})]}),"BANK_ADMIN"!==t&&"CREATED"===D&&Object(h.jsx)(j.p,{xs:6,xl:2,className:"d-flex align-self-center justify-content-end",children:"BANK_ADMIN"!==t&&"CREATED"===D&&Object(h.jsx)(j.L,{role:"button","data-id":v,onClick:i,className:"text-white d-flex align-self-center justify-content-end fw-bold p-0",children:f("requests.singleRequests.button")})})]}),Object(h.jsx)("h4",{className:"mt-5",children:f("BANK_ADMIN"===t?"requests.BANK_ADMIN.title":"ACTIVE"===D?"requests.BUSINESS_ADMIN.title.activeRequests":"requests.BUSINESS_ADMIN.title")}),"BANK_ADMIN"!==t&&!l.length&&!s&&Object(h.jsx)("h6",{className:"text-center mt-5 mb-3",children:f("requests.BUSINESS_ADMIN.subtitle")}),"BANK_ADMIN"===t&&!O.id&&!s&&Object(h.jsx)("h6",{className:"text-center mt-5 mb-3",children:f("requests.BANK_ADMIN.subtitle")}),Object(h.jsxs)(j.M,{className:"employees mt-4",children:[s&&!O.id&&Object(h.jsx)(x.a,{}),"BANK_ADMIN"===t&&O.id&&!s&&Object(h.jsx)(j.N,{className:"employees py-4 px-2 px-md-2",children:Object(h.jsxs)(j.X,{className:"m-0 align-items-stretch justify-content-between",children:[Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0",xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.amount")}),Object(h.jsx)("h6",{className:"m-0",children:"".concat(O.amount," ").concat(O.currency)})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0 text-end text-md-start",xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.percentage")}),Object(h.jsx)("span",{className:"d-block",children:"".concat(O.percentage," %")})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0",xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.days")}),Object(h.jsx)("span",{className:"d-block",children:f("requests.days.".concat(O.days))})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0 text-end text-md-start",xs:6,xl:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.type")}),Object(h.jsx)("span",{className:"d-block",children:f("requests.".concat(O.type))})]})]})}),"BANK_ADMIN"!==t&&!s&&l.map((function(e){var t=e.bankName,c=e.percentage,a=e.days,n=e.type,r=e.id,i=e.currency,l=e.revenue,o=e.orderId;return Object(h.jsx)(j.N,{className:"employees py-4 px-2",children:Object(h.jsxs)(j.X,{className:"m-0 d-flex justify-content-between align-items-stretch",children:[Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0",xs:6,md:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("bankName")}),Object(h.jsx)("h6",{className:"m-0",children:t})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0 text-end text-md-start",xs:6,md:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.percentage")}),Object(h.jsx)("span",{className:"d-block",children:"".concat(c," %")})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0",xs:6,md:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.days")}),Object(h.jsx)("span",{className:"d-block",children:f("requests.days.".concat(a))})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0 text-end text-md-start",xs:6,md:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.type")}),Object(h.jsx)("span",{className:"d-block",children:f("requests.".concat(n))})]}),Object(h.jsxs)(j.p,{className:"mb-3 mb-md-0 text-md-start",xs:6,md:2,children:[Object(h.jsx)("small",{className:"text-muted",children:f("requests.create.form.revenue")}),Object(h.jsxs)("span",{className:"d-block",children:[" ",l," ",i]})]}),"CREATED"===D&&Object(h.jsx)(j.p,{className:"d-flex align-self-center",xs:6,md:2,children:s?Object(h.jsx)(u.a,{}):Object(h.jsx)(j.L,{disabled:s,onClick:function(){return p({orderId:o,id:r})},className:m()("pe-5",{"no-events":s}),role:"button",children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})})]})},r)}))]}),Object(h.jsx)(j.O,{alignment:"center",visible:c,onDismiss:function(){return r(!1)},children:Object(h.jsxs)(j.Q,{className:"pb-4 px-3",children:[Object(h.jsx)(j.S,{onDismiss:function(){return r(!1)},children:Object(h.jsx)(j.T,{component:"h2",children:f("requests.specific.modal.title")})}),Object(h.jsx)(j.P,{className:"mb-2",children:f("requests.specific.modal.content")}),Object(h.jsxs)(j.R,{className:"justify-content-start",children:[Object(h.jsx)(j.j,{disabled:s,onClick:o,className:"text-white py-2",size:"sm",color:"primary",children:s?Object(h.jsx)(u.a,{classes:"text-white"}):f("yes")}),Object(h.jsx)(j.j,{onClick:function(){return r(!1)},className:"py-2",size:"sm",color:"primary",variant:"outline",children:f("no")})]})]})}),Object(h.jsx)(j.hb,{ref:a,push:n,placement:"top-end"})]})},O=s(120),f=function(e){var t=e.setPageMode,s=e.specificModeData,a=e.userType,u=Object(l.a)(e,["setPageMode","specificModeData","userType"]),b=Object(d.a)().t,m=Object(o.useState)(!1),x=Object(i.a)(m,2),f=x[0],v=x[1],g=Object(o.useState)(!1),N=Object(i.a)(g,2),y=N[0],w=N[1],k=Object(o.useState)([]),D=Object(i.a)(k,2),C=D[0],M=D[1],A=Object(o.useState)({order:{id:""}}),S=Object(i.a)(A,2),E=S[0],B=S[1];Object(o.useEffect)(Object(r.a)(n.a.mark((function e(){var t,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v(!0),"BANK_ADMIN"!==a){e.next=9;break}return e.next=5,Object(O.t)(s.id);case 5:t=e.sent,B(t),e.next=13;break;case 9:return e.next=11,Object(O.q)(s.id);case 11:c=e.sent,M(c);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),F((function(){return L()}));case 19:return e.prev=19,v(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])}))),[null===s||void 0===s?void 0:s.id]);var q=Object(o.useState)(0),R=Object(i.a)(q,2),T=R[0],F=R[1],I=Object(o.useRef)(),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(h.jsxs)(j.eb,{title:t?b("defaultErrorTitle"):"\u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043d\u0430 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0434\u0435\u043f\u043e\u0437\u0438\u0442\u0430 \u041f\u0440\u0438\u043d\u044f\u0442\u0430!",autohide:!0,children:[Object(h.jsxs)(j.gb,{close:!0,children:[Object(h.jsx)("svg",{className:"rounded me-2",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img",children:Object(h.jsx)("rect",{width:"100%",height:"100%",fill:t?"#EB5757":"#6FCF97"})}),Object(h.jsx)("strong",{className:"me-auto",children:b(t?"defaultErrorTitle":"congratulations")})]}),Object(h.jsx)(j.fb,{children:e||b("default400Error")})]})},P=function(){var e=Object(r.a)(n.a.mark((function e(s){var c,a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.orderId,a=s.id,e.prev=1,v(!0),e.next=5,Object(O.b)({orderId:c,offerId:a});case 5:(r=e.sent).wasCreated&&(F((function(){return L("\u0414\u0430\u043d\u043d\u044b\u0435 \u0412\u0430\u0448\u0435\u0439 \u041a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u044b \u0432 \u0431\u0430\u043d\u043a \u0434\u043b\u044f \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u044b, \u0432\u0441\u043a\u043e\u0440\u0435 \u0441 \u0412\u0430\u043c\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442:)\n\n\n\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0432\u043a\u043b\u0430\u0434\u0435 \u0432\u044b \u043d\u0430\u0439\u0434\u0435\u0442\u0435 \u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u0437\u0430\u044f\u0432\u043a\u0430\u0445",!1)})),setTimeout((function(){t("default",2),v(!1)}),2e3)),r.message&&(F((function(){return L(r.message)})),v(!1)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),v(!1),F((function(){return L()}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(r.a)(n.a.mark((function e(){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,Object(O.d)(s.id);case 4:(c=e.sent).message||"CLOSED"!==c.status||t("default"),c.message&&F((function(){return L(c.message)})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),v(!1),F((function(){return L()}));case 13:return e.prev=13,v(!1),w(!1),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,9,13,17]])})));return function(){return e.apply(this,arguments)}}(),V=Object(c.a)({onClickHandler:function(){w(!0)},userType:a,suggestions:C,bankSuggestions:E,visible:y,setVisible:w,toaster:I,toast:T,isLoading:f,specificModeData:s,handleApplyOffer:P,handleCloseRequest:U},u);return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(p,Object(c.a)({},V))})};t.default=f}}]);
//# sourceMappingURL=22.d61dc389.chunk.js.map